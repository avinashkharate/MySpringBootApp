<!DOCTYPE html>
<html>
<head>
  <title>Product List</title>
  <style>
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background-color: #f2f2f2; }
    .btn { padding: 5px 10px; margin: 2px; border: none; cursor: pointer; }
    .btn-edit { background-color: #4CAF50; color: white; }
    .btn-delete { background-color: #f44336; color: white; }
    .btn-add { background-color: #2196F3; color: white; float: right; }
  </style>
</head>
<body>
<h1>Products</h1>
<button class="btn btn-add" onclick="location.href='/product'">Add Item</button>
<br><br>
<table id="productsTable">
  <thead>
  <tr>
    <th>ID</th><th>Name</th><th>Price</th><th>Actions</th>
  </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
  function loadProducts() {
      fetch('/api/products')
          .then(res => res.json())
          .then(data => {
              const tbody = document.querySelector('#productsTable tbody');
              tbody.innerHTML = '';
              data.forEach(p => {
                  const row = `
                      <tr>
                          <td>${p.id}</td>
                          <td>${p.name}</td>
                          <td>${p.price}</td>
                          <td>
                              <button class="btn btn-edit" onclick="editProduct(${p.id})">Edit</button>
                              <button class="btn btn-delete" onclick="deleteProduct(${p.id})">Delete</button>
                          </td>
                      </tr>
                  `;
                  tbody.innerHTML += row;
              });
          });
  }

  function editProduct(id) {
      location.href = `/product?id=${id}`;
  }

  function deleteProduct(id) {
      if (confirm('Are you sure you want to delete this product?')) {
          fetch(`/api/products/${id}`, { method: 'DELETE' })
              .then(() => loadProducts());
      }
  }

  loadProducts();
</script>
</body>
</html>