<!DOCTYPE html>
<html>
<head>
  <title>Product List</title>
  <style>
    table {
        width: 60%;
        border-collapse: collapse;
        margin-top: 20px;
    }
    th, td {
        padding: 10px;
        border: 1px solid #ddd;
        text-align: center;
    }
    th {
        background-color: #f4f4f4;
    }
    .add-btn {
        background-color: #28a745;
        color: white;
        padding: 8px 16px;
        text-decoration: none;
        border-radius: 4px;
        font-size: 14px;
    }
    .add-btn:hover {
        background-color: #218838;
    }
    .delete-btn {
        color: red;
        cursor: pointer;
    }
  </style>
</head>
<body>
<h2>Product List</h2>

<!-- Add Item button -->
<a href="/product" class="add-btn">+ Add Item</a>

<table id="productTable">
  <thead>
  <tr>
    <th>ID</th>
    <th>Name</th>
    <th>Price</th>
    <th>Actions</th>
  </tr>
  </thead>
  <tbody>
  <!-- Rows will be populated by JavaScript -->
  </tbody>
</table>

<script>
  // Fetch products and populate table
  fetch('/products', { headers: { 'Accept': 'application/json' } })
      .then(response => response.json())
      .then(data => {
          const tableBody = document.querySelector('#productTable tbody');
          tableBody.innerHTML = '';
          data.forEach(product => {
              const row = document.createElement('tr');
              row.innerHTML = `
                  <td>${product.id}</td>
                  <td>${product.name}</td>
                  <td>${product.price}</td>
                  <td>
                      <a href="/product?id=${product.id}" class="action-icons edit">‚úèÔ∏è</a>
                      <span class="delete-btn" onclick="deleteProduct(${product.id})">üóëÔ∏è</span>
                  </td>
              `;
              tableBody.appendChild(row);
          });
      });

  // Delete product
  function deleteProduct(id) {
      if (confirm('Are you sure you want to delete this product?')) {
          fetch(`/product/${id}`, { method: 'DELETE' })
              .then(res => {
                  if (res.ok) {
                      location.reload();
                  } else {
                      alert('Error deleting product');
                  }
              });
      }
  }
</script>
</body>
</html>